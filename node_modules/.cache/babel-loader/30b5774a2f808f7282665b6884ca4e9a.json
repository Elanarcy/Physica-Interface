{"ast":null,"code":"var _s = $RefreshSig$();\nimport { initializeConnector } from '@web3-react/core';\nimport { GnosisSafe } from '@web3-react/gnosis-safe';\nimport { MetaMask } from '@web3-react/metamask';\nimport { Network } from '@web3-react/network';\nimport { Connector } from '@web3-react/types';\nimport GNOSIS_ICON from 'assets/images/gnosis.png';\nimport METAMASK_ICON from \"assets/images/metamask.svg\";\nimport WALLET_CONNECT_ICON from \"assets/images/walletConnectIcon.svg\";\nimport INJECTED_DARK_ICON from \"assets/svg/browser-wallet-dark.svg\";\nimport INJECTED_LIGHT_ICON from \"assets/svg/browser-wallet-light.svg\";\nimport { useCallback } from 'react';\nimport { isMobile } from 'utils/userAgent';\nimport { RPC_PROVIDERS } from '../constants/providers';\nimport { getIsCoinbaseWallet, getIsInjected, getIsMetaMaskWallet } from './utils';\nimport { WalletConnectPopup } from './WalletConnect';\nexport let ConnectionType;\n(function (ConnectionType) {\n  ConnectionType[\"INJECTED\"] = \"INJECTED\";\n  ConnectionType[\"COINBASE_WALLET\"] = \"COINBASE_WALLET\";\n  ConnectionType[\"WALLET_CONNECT\"] = \"WALLET_CONNECT\";\n  ConnectionType[\"NETWORK\"] = \"NETWORK\";\n  ConnectionType[\"GNOSIS_SAFE\"] = \"GNOSIS_SAFE\";\n})(ConnectionType || (ConnectionType = {}));\nfunction onError(error) {\n  console.debug(`web3-react error: ${error}`);\n}\nconst [web3Network, web3NetworkHooks] = initializeConnector(actions => new Network({\n  actions,\n  urlMap: RPC_PROVIDERS,\n  defaultChainId: 7070\n}));\nexport const networkConnection = {\n  getName: () => 'Network',\n  connector: web3Network,\n  hooks: web3NetworkHooks,\n  type: ConnectionType.NETWORK,\n  shouldDisplay: () => false\n};\nconst getIsCoinbaseWalletBrowser = () => isMobile && getIsCoinbaseWallet();\nconst getIsMetaMaskBrowser = () => isMobile && getIsMetaMaskWallet();\nconst getIsInjectedMobileBrowser = () => getIsCoinbaseWalletBrowser() || getIsMetaMaskBrowser();\nconst getShouldAdvertiseMetaMask = () => !getIsMetaMaskWallet() && !isMobile && (!getIsInjected() || getIsCoinbaseWallet());\nconst getIsGenericInjector = () => getIsInjected() && !getIsMetaMaskWallet() && !getIsCoinbaseWallet();\nconst [web3Injected, web3InjectedHooks] = initializeConnector(actions => new MetaMask({\n  actions,\n  onError\n}));\nconst injectedConnection = {\n  // TODO(WEB-3131) re-add \"Install MetaMask\" string when no injector is present\n  getName: () => getIsGenericInjector() ? 'Browser Wallet' : 'MetaMask',\n  connector: web3Injected,\n  hooks: web3InjectedHooks,\n  type: ConnectionType.INJECTED,\n  getIcon: isDarkMode => getIsGenericInjector() ? isDarkMode ? INJECTED_DARK_ICON : INJECTED_LIGHT_ICON : METAMASK_ICON,\n  shouldDisplay: () => getIsMetaMaskWallet() || getShouldAdvertiseMetaMask() || getIsGenericInjector(),\n  // If on non-injected, non-mobile browser, prompt user to install Metamask\n  overrideActivate: () => {\n    if (getShouldAdvertiseMetaMask()) {\n      window.open('https://metamask.io/', 'inst_metamask');\n      return true;\n    }\n    return false;\n  }\n};\nconst [web3GnosisSafe, web3GnosisSafeHooks] = initializeConnector(actions => new GnosisSafe({\n  actions\n}));\nexport const gnosisSafeConnection = {\n  getName: () => 'Gnosis Safe',\n  connector: web3GnosisSafe,\n  hooks: web3GnosisSafeHooks,\n  type: ConnectionType.GNOSIS_SAFE,\n  getIcon: () => GNOSIS_ICON,\n  shouldDisplay: () => false\n};\nconst [web3WalletConnect, web3WalletConnectHooks] = initializeConnector(actions => new WalletConnectPopup({\n  actions,\n  onError\n}));\nexport const walletConnectConnection = {\n  getName: () => 'WalletConnect',\n  connector: web3WalletConnect,\n  hooks: web3WalletConnectHooks,\n  type: ConnectionType.WALLET_CONNECT,\n  getIcon: () => WALLET_CONNECT_ICON,\n  shouldDisplay: () => !getIsInjectedMobileBrowser()\n};\nexport function getConnections() {\n  return [injectedConnection, walletConnectConnection, gnosisSafeConnection, networkConnection];\n}\nexport function useGetConnection() {\n  _s();\n  return useCallback(c => {\n    if (c instanceof Connector) {\n      const connection = getConnections().find(connection => connection.connector === c);\n      if (!connection) {\n        throw Error('unsupported connector');\n      }\n      return connection;\n    } else {\n      switch (c) {\n        case ConnectionType.INJECTED:\n          return injectedConnection;\n        case ConnectionType.WALLET_CONNECT:\n          return walletConnectConnection;\n        case ConnectionType.NETWORK:\n          return networkConnection;\n        case ConnectionType.GNOSIS_SAFE:\n          return gnosisSafeConnection;\n      }\n    }\n  }, []);\n}\n_s(useGetConnection, \"epj4qY15NHsef74wNqHIp5fdZmg=\");","map":{"version":3,"names":["initializeConnector","GnosisSafe","MetaMask","Network","Connector","GNOSIS_ICON","useCallback","isMobile","RPC_PROVIDERS","getIsCoinbaseWallet","getIsInjected","getIsMetaMaskWallet","WalletConnectPopup","ConnectionType","onError","error","console","debug","web3Network","web3NetworkHooks","actions","urlMap","defaultChainId","networkConnection","getName","connector","hooks","type","NETWORK","shouldDisplay","getIsCoinbaseWalletBrowser","getIsMetaMaskBrowser","getIsInjectedMobileBrowser","getShouldAdvertiseMetaMask","getIsGenericInjector","web3Injected","web3InjectedHooks","injectedConnection","INJECTED","getIcon","isDarkMode","INJECTED_DARK_ICON","INJECTED_LIGHT_ICON","METAMASK_ICON","overrideActivate","window","open","web3GnosisSafe","web3GnosisSafeHooks","gnosisSafeConnection","GNOSIS_SAFE","web3WalletConnect","web3WalletConnectHooks","walletConnectConnection","WALLET_CONNECT","WALLET_CONNECT_ICON","getConnections","useGetConnection","c","connection","find","Error"],"sources":["/workspace/Physica-Interface/src/connection/index.ts"],"sourcesContent":["import { CoinbaseWallet } from '@web3-react/coinbase-wallet'\nimport { initializeConnector, Web3ReactHooks } from '@web3-react/core'\nimport { GnosisSafe } from '@web3-react/gnosis-safe'\nimport { MetaMask } from '@web3-react/metamask'\nimport { Network } from '@web3-react/network'\nimport { Connector } from '@web3-react/types'\nimport COINBASE_ICON from 'assets/images/coinbaseWalletIcon.svg'\nimport GNOSIS_ICON from 'assets/images/gnosis.png'\nimport METAMASK_ICON from 'assets/images/metamask.svg'\nimport WALLET_CONNECT_ICON from 'assets/images/walletConnectIcon.svg'\nimport INJECTED_DARK_ICON from 'assets/svg/browser-wallet-dark.svg'\nimport INJECTED_LIGHT_ICON from 'assets/svg/browser-wallet-light.svg'\nimport { SupportedChainId } from 'constants/chains'\nimport { useCallback } from 'react'\nimport { isMobile, isNonIOSPhone } from 'utils/userAgent'\n\nimport { RPC_URLS } from '../constants/networks'\nimport { RPC_PROVIDERS } from '../constants/providers'\nimport { getIsCoinbaseWallet, getIsInjected, getIsMetaMaskWallet } from './utils'\nimport { WalletConnectPopup } from './WalletConnect'\n\nexport enum ConnectionType {\n  INJECTED = 'INJECTED',\n  COINBASE_WALLET = 'COINBASE_WALLET',\n  WALLET_CONNECT = 'WALLET_CONNECT',\n  NETWORK = 'NETWORK',\n  GNOSIS_SAFE = 'GNOSIS_SAFE',\n}\n\nexport interface Connection {\n  getName(): string\n  connector: Connector\n  hooks: Web3ReactHooks\n  type: ConnectionType\n  getIcon?(isDarkMode: boolean): string\n  shouldDisplay(): boolean\n  overrideActivate?: () => boolean\n  isNew?: boolean\n}\n\nfunction onError(error: Error) {\n  console.debug(`web3-react error: ${error}`)\n}\n\nconst [web3Network, web3NetworkHooks] = initializeConnector<Network>(\n  (actions) => new Network({ actions, urlMap: RPC_PROVIDERS, defaultChainId: 7070 }),\n)\nexport const networkConnection: Connection = {\n  getName: () => 'Network',\n  connector: web3Network,\n  hooks: web3NetworkHooks,\n  type: ConnectionType.NETWORK,\n  shouldDisplay: () => false,\n}\n\nconst getIsCoinbaseWalletBrowser = () => isMobile && getIsCoinbaseWallet()\nconst getIsMetaMaskBrowser = () => isMobile && getIsMetaMaskWallet()\nconst getIsInjectedMobileBrowser = () => getIsCoinbaseWalletBrowser() || getIsMetaMaskBrowser()\n\nconst getShouldAdvertiseMetaMask = () =>\n  !getIsMetaMaskWallet() && !isMobile && (!getIsInjected() || getIsCoinbaseWallet())\nconst getIsGenericInjector = () => getIsInjected() && !getIsMetaMaskWallet() && !getIsCoinbaseWallet()\n\nconst [web3Injected, web3InjectedHooks] = initializeConnector<MetaMask>((actions) => new MetaMask({ actions, onError }))\n\nconst injectedConnection: Connection = {\n  // TODO(WEB-3131) re-add \"Install MetaMask\" string when no injector is present\n  getName: () => (getIsGenericInjector() ? 'Browser Wallet' : 'MetaMask'),\n  connector: web3Injected,\n  hooks: web3InjectedHooks,\n  type: ConnectionType.INJECTED,\n  getIcon: (isDarkMode: boolean) =>\n    getIsGenericInjector() ? (isDarkMode ? INJECTED_DARK_ICON : INJECTED_LIGHT_ICON) : METAMASK_ICON,\n  shouldDisplay: () => getIsMetaMaskWallet() || getShouldAdvertiseMetaMask() || getIsGenericInjector(),\n  // If on non-injected, non-mobile browser, prompt user to install Metamask\n  overrideActivate: () => {\n    if (getShouldAdvertiseMetaMask()) {\n      window.open('https://metamask.io/', 'inst_metamask')\n      return true\n    }\n    return false\n  },\n}\nconst [web3GnosisSafe, web3GnosisSafeHooks] = initializeConnector<GnosisSafe>((actions) => new GnosisSafe({ actions }))\nexport const gnosisSafeConnection: Connection = {\n  getName: () => 'Gnosis Safe',\n  connector: web3GnosisSafe,\n  hooks: web3GnosisSafeHooks,\n  type: ConnectionType.GNOSIS_SAFE,\n  getIcon: () => GNOSIS_ICON,\n  shouldDisplay: () => false,\n}\n\nconst [web3WalletConnect, web3WalletConnectHooks] = initializeConnector<WalletConnectPopup>(\n  (actions) => new WalletConnectPopup({ actions, onError }),\n)\nexport const walletConnectConnection: Connection = {\n  getName: () => 'WalletConnect',\n  connector: web3WalletConnect,\n  hooks: web3WalletConnectHooks,\n  type: ConnectionType.WALLET_CONNECT,\n  getIcon: () => WALLET_CONNECT_ICON,\n  shouldDisplay: () => !getIsInjectedMobileBrowser(),\n}\n\n\nexport function getConnections() {\n  return [\n    injectedConnection,\n    walletConnectConnection,\n    gnosisSafeConnection,\n    networkConnection,\n  ]\n}\n\nexport function useGetConnection() {\n  return useCallback((c: Connector | ConnectionType) => {\n    if (c instanceof Connector) {\n      const connection = getConnections().find((connection) => connection.connector === c)\n      if (!connection) {\n        throw Error('unsupported connector')\n      }\n      return connection\n    } else {\n      switch (c) {\n        case ConnectionType.INJECTED:\n          return injectedConnection\n        case ConnectionType.WALLET_CONNECT:\n          return walletConnectConnection\n        case ConnectionType.NETWORK:\n          return networkConnection\n        case ConnectionType.GNOSIS_SAFE:\n          return gnosisSafeConnection\n      }\n    }\n  }, [])\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}